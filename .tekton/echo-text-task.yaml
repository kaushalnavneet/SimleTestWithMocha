apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: echo-text
spec:
  params:
    - name: deployBaseImage
      default: ibmcom/pipeline-base-image:latest
  stepTemplate:
    env:
      - name: TEXT
        valueFrom:
          configMapKeyRef:
            name: trigger-data
            key: TEXT
      - name: number
        valueFrom:
          configMapKeyRef:
            name: trigger-data
            key: number
      - name: branch
        valueFrom:
          configMapKeyRef:
            name: trigger-data
            key: branch
      - name: revision
        valueFrom:
          configMapKeyRef:
            name: trigger-data
            key: revision
      - name: reponame
        valueFrom:
          configMapKeyRef:
            name: trigger-data
            key: reponame
      - name: merged
        valueFrom:
          configMapKeyRef:
            name: trigger-data
            key: merged
  steps:
  - name: echo-text
    image: $(params.deployBaseImage)
    command: ["/bin/sh", "-c"]
    args:
        - |
          echo "TEXT is '${TEXT}'"
          echo "number is '${number}'"
          echo "merged is '${merged}'"
          echo "branch is '${branch}'"
          echo "revision is '${revision}'"
          echo "reponame is '${reponame}'"